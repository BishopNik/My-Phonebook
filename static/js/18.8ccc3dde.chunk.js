"use strict";(self.webpackChunkreact_my_phonebook=self.webpackChunkreact_my_phonebook||[]).push([[18],{7018:function(e,a,s){s.r(a);var n=s(4165),r=s(5861),t=s(9439),c=s(2791),o=s(9434),l=s(3329),i=s(9273),u=s(6993),d=s(7689),p=s(6009),h=s(184);a.default=function(){var e=(0,c.useState)(null),a=(0,t.Z)(e,2),s=a[0],x=a[1],f=(0,c.useState)(null),m=(0,t.Z)(f,2),v=m[0],w=m[1],j=(0,o.I0)(),k=(0,d.s0)(),_=(0,p.a)().user;(0,c.useEffect)((function(){if(s){var e=URL.createObjectURL(s);return w(e),function(){return URL.revokeObjectURL(e)}}}),[s]);var b=function(e,a,s){return a!==s?((0,u._N)("Passwords do not match. Please change your password."),e):a},g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a){var r,t,c,o,l,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,r=a.target.name.value,t=a.target.oldpassword.value,c=a.target.password.value,o=a.target.confirmpassword.value,l=b(t,c,o),!r){e.next=11;break}return e.next=10,j((0,i.eu)({name:r}));case 10:(0,u.L$)("Name changed");case 11:if(l===t){e.next=15;break}return e.next=14,j((0,i.Cp)({oldPassword:t,newPassword:l}));case 14:(0,u.L$)("Password changed");case 15:if(!s){e.next=21;break}return(d=new FormData).append("avatar",s,s.name),e.next=20,j((0,i.mk)(d));case 20:(0,u.L$)("Avatar changed");case 21:l!==t&&null!==t&&k("/phonebook"),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),(0,u._N)("Error change settings",e.t0);case 27:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(a){return e.apply(this,arguments)}}();return(0,h.jsx)(l.W2,{children:(0,h.jsx)(l.l0,{onSubmit:g,children:(0,h.jsxs)(l.fk,{children:[(0,h.jsxs)(l.AG,{children:[(0,h.jsxs)(l.hs,{children:[(0,h.jsxs)(l.__,{children:["Old name",(0,h.jsx)(l.II,{type:"text",name:"oldname",value:_.name,disabled:!0})]}),(0,h.jsxs)(l.__,{children:["New name",(0,h.jsx)(l.II,{type:"text",name:"name"})]})]}),(0,h.jsxs)(l.hs,{children:[(0,h.jsxs)(l.__,{children:["Old password",(0,h.jsx)(l.II,{type:"password",name:"oldpassword"})]}),(0,h.jsxs)(l.__,{children:["New password",(0,h.jsx)(l.II,{type:"password",name:"password"})]}),(0,h.jsxs)(l.__,{children:["Confirm password",(0,h.jsx)(l.II,{type:"password",name:"confirmpassword"})]})]})]}),(0,h.jsxs)(l.AG,{children:[(0,h.jsx)(l.Ei,{src:v||_.avatarURL,alt:"user avatar"}),(0,h.jsx)(l.II,{type:"file",name:"avatar",onChange:function(e){var a=e.target;if(a.files){var s=a.files[0];s&&s instanceof File&&s.type.startsWith("image/")?x(s):((0,u._N)("Bad type file"),a.value="",w(_.avatarURL),x(null),a.click())}else(0,u._N)("Please select image")}}),(0,h.jsxs)(l.KN,{children:[(0,h.jsx)(l.zx,{type:"submit",children:"Change"}),(0,h.jsx)(l.zx,{type:"button",onClick:function(){return k("/phonebook")},children:"Cancel"})]})]})]})})})}}}]);
//# sourceMappingURL=18.8ccc3dde.chunk.js.map